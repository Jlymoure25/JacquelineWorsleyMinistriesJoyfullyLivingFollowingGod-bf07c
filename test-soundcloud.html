<!DOCTYPE html>
<html>
<head>
    <title>SoundCloud Widget Test</title>
</head>
<body>
    <h2>Testing SoundCloud Widget API</h2>
    
    <!-- Test 1: We Belong Together -->
    <h3>Test 1: We Belong Together Track</h3>
    <iframe id="sc-widget-1" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" 
            src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/smoothjazzallstars/we-belong-together-3&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true&enable_api=true&callback=scCallback1">
    </iframe>
    
    <!-- Test 2: Known working track for comparison -->
    <h3>Test 2: Known Working Track</h3>
    <iframe id="sc-widget-2" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" 
            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/13158665&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true&enable_api=true&callback=scCallback2">
    </iframe>
    
    <!-- Test 3: Alternative We Belong Together URL format -->
    <h3>Test 3: Alternative URL Format</h3>
    <iframe id="sc-widget-3" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" 
            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1234567890&color=%23ff5500&auto_play=false&enable_api=true">
    </iframe>
    
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script>
        // Global callback functions for testing
        function scCallback1() {
            console.log('Widget 1 (We Belong Together) loaded');
            testWidget('sc-widget-1', 'We Belong Together');
        }
        
        function scCallback2() {
            console.log('Widget 2 (Known working) loaded');
            testWidget('sc-widget-2', 'Known Working Track');
        }
        
        function testWidget(widgetId, trackName) {
            const widget = SC.Widget(document.getElementById(widgetId));
            
            widget.bind(SC.Widget.Events.READY, function() {
                console.log(`${trackName}: Widget ready`);
                
                widget.getCurrentSound(function(sound) {
                    console.log(`${trackName}: Track info:`, sound);
                    if (sound) {
                        console.log(`${trackName}: Track found - ID: ${sound.id}, Title: ${sound.title}`);
                        
                        // Test play functionality
                        widget.setVolume(17);
                        widget.play();
                        console.log(`${trackName}: Play command sent`);
                    } else {
                        console.error(`${trackName}: Track not found or not accessible`);
                    }
                });
            });
            
            widget.bind(SC.Widget.Events.PLAY, function() {
                console.log(`${trackName}: Successfully playing!`);
            });
            
            widget.bind(SC.Widget.Events.ERROR, function(error) {
                console.error(`${trackName}: Error:`, error);
            });
        }
        
        // Test widgets without callbacks after page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                console.log('Testing widget 3 without callback...');
                testWidget('sc-widget-3', 'Alternative Format');
            }, 2000);
        });
    </script>
</body>
</html>